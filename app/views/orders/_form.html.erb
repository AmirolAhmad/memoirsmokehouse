<% if @order.errors.any? %>
<div class="alert alert-danger alert-dismissable fade show">
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  <strong><%= pluralize(@order.errors.count, "error") %> prohibited this user from being saved:</strong>
  <ul>
    <% @order.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
    <% end %>
  </ul>
</div>
<% end %>

<div class="container">
  <div class="row align-items-start">
    <div class="col-md-6 offset-md-3">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title">Order Form</h5>
        </div>
        <div class="card-body">
          <div class="form-group">
            <%= f.label :fullname, "Full Name" %>
            <%= f.text_field :fullname, class: "form-control", required: true %>
          </div>
          <hr>
          <div class="form-group">
            <%= f.label :phone_number, "Phone Number" %>
            <%= f.text_field :phone_number, class: "form-control", required: true %>
          </div>
          <hr>
          <div class="form-group">
            <%= f.label :address1, "Address 1" %>
            <%= f.text_field :address1, class: "form-control", required: true %>
          </div>
          <div class="form-group">
            <%= f.label :address2, "Address 2" %>
            <%= f.text_field :address2, class: "form-control", required: true %>
          </div>
          <hr>
          <div class="row">
            <div class="col">
              <div class="form-group">
                <%= f.label :city, "City" %>
                <%= f.text_field :city, class: "form-control", required: true %>
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <%= f.label :postcode, "Postcode" %>
                <%= f.text_field :postcode, class: "form-control", required: true %>
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <%= f.label :state, "State" %>
                <%= f.collection_select :state_id, State.order(:name), :id, :name, { prompt: "-- Select" }, { class: 'form-control ' } %>
              </div>
            </div>
          </div>
          <hr>
          <div class="form-group">
            <%= f.label :delivery_method, "Delivery Method" %><br />
            <%= f.radio_button :delivery_method, "Self Pickup", required: true %> Self Pickup (Puncak Alam)<br />
            <%= f.radio_button :delivery_method, "Rider Delivery", required: true %> Rider Delivery<br />
            <div id="deliveryHelp" class="form-text">
              (Note: For rider delivery, RM25 will be charged except Puncak Alam, Saujana Utama and Bandar Tasek Puteri)
            </div>
          </div>
          <hr>
          <div class="form-group">
          <label  class="form-label">Menu</label>
          <ul class="list-group">
          <% Menu.all.each do |menu| %>
            <label class="list-group-item">
                <%= check_box_tag "order[menu_ids][]", menu.id, f.object.menu.include?(menu), disabled: menu.outofstock? ? true : false %>
                <%= menu.name %> - <%= menu.weight %><% if menu.weight != "NA" %>g <% end %> - <%= number_to_currency(menu.price, unit: "RM") %> <%= menu.outofstock? ? "<span class='badge bg-danger'>Out of Stock</span>".html_safe : "" %><br />
            </label>
          <% end %>
          </ul>
        </div>
          <%= f.submit "Submit", class: "btn btn-primary" %>
      </div>
    </div>
  </div>
</div>